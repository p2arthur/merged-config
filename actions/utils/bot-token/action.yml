name: Generate Bot Token
author: mrcointreau
description: Generate a GitHub App installation token for automated operations

inputs:
  app-id:
    description: GitHub App ID
    required: true
  private-key:
    description: GitHub App private key
    required: true
  owner:
    description: Repository owner (defaults to current repo owner)
    required: false
    default: ${{ github.repository_owner }}

outputs:
  token:
    description: Generated installation token
    value: ${{ steps.generate.outputs.token }}

runs:
  using: composite
  steps:
    - name: Generate Token
      id: generate
      uses: actions/create-github-app-token@29824e69f54612133e76f7eaac726eef6c875baf # v2.2.1
      with:
        app-id: ${{ inputs.app-id }}
        private-key: ${{ inputs.private-key }}
        owner: ${{ inputs.owner }}
